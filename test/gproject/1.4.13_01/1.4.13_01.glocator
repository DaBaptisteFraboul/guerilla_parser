docformatrevision(19)
oid[1]=create("SkyLight","","SkyLight")
	oid[2]=create("Light","$1","Sky")
		oid[3]=create("EnvironmentLocator","$2","EnvironmentMap")
			oid[4]=create("EnvironmentShader","$3","Shader")
				oid[5]=create("ShaderNodeOutputEnvironment","$4","Environment")
					oid[6]=create("ShaderNodeIn","$5","Input1")
						set("$6.Desc",types.color)
						set("$6.PlugName","Color")
						set("$6.Value",{1,1,1})
					set("$5.NodePos",{-30,-22.5})
				oid[7]=create("ShaderNodeIn","$4","Input1")
					set("$7.PlugName","Intensity")
				oid[8]=create("ShaderNodeIn","$4","Input2")
					set("$8.PlugName","Turbidity")
				oid[9]=create("ShaderNodeIn","$4","Input3")
					set("$9.PlugName","Albedo")
				oid[10]=create("ShaderNodeIn","$4","Input4")
					set("$10.PlugName","Elevation")
				oid[11]=create("ShaderNodeSL","$4","SkyLight")
					oid[12]=create("ShaderNodeIn","$11","Input1")
						set("$12.Desc",types.float {slidermin=-5,slidermax=2})
						set("$12.HideInput",false)
						set("$12.PlugName","Intensity")
						set("$12.Value",0)
					oid[13]=create("ShaderNodeIn","$11","Input2")
						set("$13.Desc",types.float {min=1,max=10})
						set("$13.HideInput",false)
						set("$13.PlugName","Turbidity")
						set("$13.Value",1)
					oid[14]=create("ShaderNodeIn","$11","Input3")
						set("$14.Desc",types.float {min=0,max=1})
						set("$14.HideInput",false)
						set("$14.PlugName","Albedo")
						set("$14.Value",0.3)
					oid[15]=create("ShaderNodeIn","$11","Input4")
						set("$15.Desc",types.float {min=-90,max=90,slidermin=0})
						set("$15.HideInput",false)
						set("$15.PlugName","Elevation")
						set("$15.Value",60.59)
					oid[16]=create("ShaderNodeOut","$11","Output1")
						set("$16.PlugName","Output")
					set("$11.Code","func SkyLight Intensity Turbidity Albedo Elevation\010{\010\009decl i_result\010\009decl elevation\010\009= elevation (div (mul Elevation 3.14159) 180)\010\009decl v\010\009= v (normalize I)\010\009decl s\010\009= s (vector3 (cos elevation) (sin elevation) 0)\010\009decl costheta\010\009= costheta (ycomp v)\010\009decl theta\010\009= theta (acos costheta)\010\009decl cosgamma\010\009= cosgamma (dot v s)\010\009decl gamma\010\009= gamma (acos cosgamma)\010\009decl intensity\010\009= intensity (pow 2 (sub Intensity 5))\010\009= i_result (select (cmpgt costheta 0) (mul (skylight Turbidity Albedo elevation theta gamma) intensity) { decl __casttmp = __casttmp (mul Albedo (ycomp s)) return (vector3 __casttmp __casttmp __casttmp) })\010\009return i_result\010}\010= out1 (SkyLight arg1 arg2 arg3 arg4)")
					set("$11.NodePos",{-136,-44.5})
					set("$11.Script","color SkyLight (\010\009\009\009float\009Intensity = 0;\009\009// %param Intensity={type=types.float{slidermin=-5,slidermax=2}}\010\009\009\009float\009Turbidity = 5;\009\009// %param Turbidity={type=types.float{min=1,max=10}}\010\009\009\009float\009Albedo = 0.5;\009\009// %param Albedo={type=types.float{min=0,max=1}}\010\009\009\009float\009Elevation = 45)\009\009// %param Elevation={type=types.float{min=-90,slidermin=0,max=90}}\010{\010\009float\009elevation = Elevation*PI/180;\010\009vector\009v = normalize (I);\010\009vector\009s = vector (cos (elevation), sin (elevation), 0);\010\009float\009costheta = ycomp (v);\010\009float\009theta = acos (costheta);\010\009float\009cosgamma = v.s;\010\009float\009gamma = acos (cosgamma);\010\009float\009intensity = pow (2, Intensity-5);\010\009return costheta > 0 ? skylight (Turbidity, Albedo, elevation, theta, gamma) * intensity : color (Albedo*ycomp (s));\010}\010")
				set("$4.HostPath","")
			set("$3.Blur",0)
			set("$3.EnvironmentMap","")
			set("$3.Filter","triangle")
			set("$3.FreezeTransform",false)
			set("$3.GLCompression","1")
			set("$3.Gamma",1)
			set("$3.Hidden",true)
			set("$3.HierarchyMode",0)
			set("$3.HostPath","")
			set("$3.Hue",0)
			set("$3.Intensity",1)
			set("$3.MapMode","cubeuppz")
			set("$3.Membership","")
			set("$3.Opacity",false)
			set("$3.Rotation",0)
			set("$3.Sampling",1)
			set("$3.Saturation",1)
			set("$3.Size",128)
			set("$3.Transform",transform.Id)
			set("$3.Width",1)
		oid[17]=create("ShaderNodeOutputLight","$2","Output")
			oid[18]=create("ShaderNodeIn","$17","Input1")
				set("$18.Desc",LUIPSTypeColor)
				set("$18.PlugName","Color")
				set("$18.Value",{1,1,1})
		set("$2.Absolute",true)
		set("$2.Angle",2)
		set("$2.CastShadows",false)
		set("$2.Category","EnvLight")
		set("$2.Color",{1,1,1})
		set("$2.Decay",2)
		set("$2.DirectionMode","z")
		set("$2.FreezeTransform",false)
		set("$2.Gamma",1)
		set("$2.Hidden",false)
		set("$2.HierarchyMode",0)
		set("$2.HostPath","")
		set("$2.Hue",0)
		set("$2.Intensity",1)
		set("$2.LightMap","")
		set("$2.LightSet","Lights")
		set("$2.LightType","env")
		set("$2.Membership","")
		set("$2.On",true)
		set("$2.PrimaryUseSurface",false)
		set("$2.RayLength",10000)
		set("$2.Sampling",1)
		set("$2.Saturation",1)
		set("$2.SeparateSampling",true)
		set("$2.ShadowId",{0,0,1})
		set("$2.ShadowSet","Shadows")
		set("$2.SizeX",1)
		set("$2.SizeY",1)
		set("$2.TargetDistance",1)
		set("$2.Threshold",0)
		set("$2.Transform",transform.Id)
		set("$2.Type","DistantLight")
		set("$2.UsePortals",true)
		set("$2._WorldTransform",transform.Id)
		oid[19]=create("SceneGraphNodePropsPlug","$2","DoubleSided",4,types.bool,false)
		oid[20]=create("HSetPlug","$2","HSet",4,types.hset,"Diffuse,Reflection,Refraction,Shadows")
		oid[21]=create("SceneGraphNodeRenderPropsPlug","$2","PrimaryVisibility",4,types.bool,false)
	oid[22]=create("Light","$1","Sun")
		oid[23]=create("Expression","$22","ColorExp")
			set("$23.HostPath","")
			set("$23.Script","local\009radiance0 = sunradiance (Turbidity, Albedo, 0)\010local\009intensity0 = (radiance0[1]+radiance0[2]+radiance0[3])/3\010local\009radiance = sunradiance (Turbidity, Albedo, math.min (1.57079631, (90-Elevation)*M_PI/180))\010local\009intensity = (radiance[1]+radiance[2]+radiance[3])/3\010local\009max = math.max (radiance[1], radiance[2], radiance[3])\010Out = { radiance[1]/max, radiance[2]/max, radiance[3]/max }\010Intensity = intensity / intensity0\010")
			oid[24]=create("ExpressionInput","$23","Albedo",4,types.float {},0.7)
			oid[25]=create("ExpressionInput","$23","Elevation",4,types.float {},15)
			oid[26]=create("ExpressionOutput","$23","Intensity",4,types.float {},0.54389959288544)
			oid[27]=create("ExpressionOutput","$23","Out",4,types.color,{1,0.723920689849,0.53701723628079})
			oid[28]=create("ExpressionInput","$23","Turbidity",4,types.float {},5)
		oid[29]=create("TransformEuler","$22","Euler")
			oid[30]=create("Expression","$29","RZExp")
				set("$30.HostPath","")
				set("$30.Script","Out = -Elevation")
				oid[31]=create("ExpressionInput","$30","Elevation",4,types.float {},15)
				oid[32]=create("ExpressionOutput","$30","Out",4,types.angle,-15)
			set("$29.MotionSteps",2)
			set("$29.Out",transform.create(2,0,0,0,{-4.2221959262179e-08,-1.1313339598473e-08,1,0,-0.25881904363632,0.96592581272125,0,0,-0.96592581272125,-0.25881904363632,-4.3711388286738e-08,0,1.9318516254425,0.51763808727264,8.7422776573476e-08,1},1,{-4.2221959262179e-08,-1.1313339598473e-08,1,0,-0.25881904363632,0.96592581272125,0,0,-0.96592581272125,-0.25881904363632,-4.3711388286738e-08,0,1.9318516254425,0.51763808727264,8.7422776573476e-08,1}))
			set("$29.RX",0)
			set("$29.RY",90)
			set("$29.SX",1)
			set("$29.SY",1)
			set("$29.SZ",1)
			set("$29.TX",0)
			set("$29.TY",0)
			set("$29.TZ",0)
		oid[33]=create("TransformEuler","$22","Euler1")
			set("$33.MotionSteps",2)
			set("$33.Out",transform.create(2,0,0,0,{1,0,0,0,0,1,0,0,0,0,1,0,0,0,-2,1},1,{1,0,0,0,0,1,0,0,0,0,1,0,0,0,-2,1}))
			set("$33.RX",0)
			set("$33.RY",0)
			set("$33.RZ",0)
			set("$33.SX",1)
			set("$33.SY",1)
			set("$33.SZ",1)
			set("$33.TX",0)
			set("$33.TY",0)
			set("$33.TZ",-2)
		oid[34]=create("Expression","$22","IntensityExp")
			set("$34.HostPath","")
			set("$34.Script","local\009radiance0 = sunradiance (Turbidity, Albedo, 0)\010local\009intensity0 = (radiance0[1]+radiance0[2]+radiance0[3])/3\010local\009radiance = sunradiance (Turbidity, Albedo, math.min (1.57079631, (90-Elevation)*M_PI/180))\010local\009intensity = (radiance[1]+radiance[2]+radiance[3])/3\010Out = Intensity * intensity / intensity0\010")
			oid[35]=create("ExpressionInput","$34","Albedo",4,types.float {},0.7)
			oid[36]=create("ExpressionInput","$34","Elevation",4,types.float {},15)
			oid[37]=create("ExpressionInput","$34","Intensity",4,types.float {},0.5)
			oid[38]=create("ExpressionOutput","$34","Out",4,types.float {min=0,slidermax=10},0.27194979644272)
			oid[39]=create("ExpressionInput","$34","Turbidity",4,types.float {},5)
		oid[40]=create("ShaderNodeOutputLight","$22","Output")
			oid[41]=create("ShaderNodeIn","$40","Input1")
				set("$41.Desc",LUIPSTypeColor)
				set("$41.PlugName","Color")
				set("$41.Value",{1,1,1})
		set("$22.Absolute",true)
		set("$22.CastShadows",false)
		set("$22.Category","KeyLight")
		set("$22.Decay",0)
		set("$22.DirectionMode","z")
		set("$22.FreezeTransform",false)
		set("$22.Gamma",1)
		set("$22.Hidden",false)
		set("$22.HierarchyMode",0)
		set("$22.HostPath","")
		set("$22.Hue",0)
		set("$22.LightMap","")
		set("$22.LightSet","Lights")
		set("$22.LightType","distant")
		set("$22.Membership","")
		set("$22.On",true)
		set("$22.PrimaryUseSurface",false)
		set("$22.RayLength",10000)
		set("$22.Sampling",1)
		set("$22.Saturation",1)
		set("$22.SeparateSampling",false)
		set("$22.ShadowId",{1,0,0})
		set("$22.ShadowSet","Shadows")
		set("$22.SizeX",1)
		set("$22.SizeY",1)
		set("$22.TargetDistance",1)
		set("$22.Threshold",0)
		set("$22.Type","DistantLight")
		set("$22.UsePortals",true)
		set("$22._WorldTransform",transform.create(2,0,0,0,{-4.2221959262179e-08,-1.1313339598473e-08,1,0,-0.25881904363632,0.96592581272125,0,0,-0.96592581272125,-0.25881904363632,-4.3711388286738e-08,0,1.9318516254425,0.51763808727264,8.7422776573476e-08,1},1,{-4.2221959262179e-08,-1.1313339598473e-08,1,0,-0.25881904363632,0.96592581272125,0,0,-0.96592581272125,-0.25881904363632,-4.3711388286738e-08,0,1.9318516254425,0.51763808727264,8.7422776573476e-08,1}))
		oid[42]=create("SceneGraphNodePropsPlug","$22","DoubleSided",4,types.bool,false)
		oid[43]=create("HSetPlug","$22","HSet",4,types.hset,"Diffuse,Reflection,Refraction,Shadows")
		oid[44]=create("SceneGraphNodeRenderPropsPlug","$22","PrimaryVisibility",4,types.bool,false)
	set("$1.FreezeTransform",false)
	set("$1.Hidden",false)
	set("$1.HierarchyMode",0)
	set("$1.HostPath","")
	set("$1.Membership","")
	set("$1.Transform",transform.Id)
	oid[45]=create("DynAttrPlug","$1","Albedo",4,types.float {min=0,max=1},0.7)
	oid[46]=create("DynAttrPlug","$1","Elevation",4,types.float {min=0,max=90},15)
	oid[47]=create("DynAttrPlug","$1","Intensity",4,types.float {min=0,slidermax=4},0.5)
	oid[48]=create("DynAttrPlug","$1","SkyExponent",4,types.float {slidermin=-5,slidermax=5},0)
	oid[49]=create("DynAttrPlug","$1","SunExponent",4,types.float {slidermin=-5,slidermax=5},0)
	oid[50]=create("DynAttrPlug","$1","SunRadius",4,types.float {slidermin=0.2,slidermax=3},1)
	oid[51]=create("DynAttrPlug","$1","Turbidity",4,types.float {min=1,max=10},5)
depend("$22._WorldTransform","$1.Transform")
depend("$2._WorldTransform","$1.Transform")
connect("$35","$45")
connect("$24","$45")
connect("$9.Value","$45")
connect("$39","$51")
connect("$8.Value","$51")
connect("$28","$51")
connect("$2.Exponent","$48")
connect("$22.Angle","$50")
connect("$37","$47")
connect("$7.Value","$47")
connect("$31","$46")
connect("$36","$46")
connect("$10.Value","$46")
connect("$25","$46")
connect("$22.Exponent","$49")
depend("$2._WorldTransform","$1.HierarchyMode")
depend("$22._WorldTransform","$1.HierarchyMode")
depend("$4.ShaderRT","$7.Name")
depend("$4.ShaderRT","$9.Name")
depend("$4.ShaderRT","$10.Name")
depend("$4.ShaderRT","$8.Name")
depend("$4.Shader","$7.Name")
depend("$4.Shader","$9.Name")
depend("$4.Shader","$10.Name")
depend("$4.Shader","$8.Name")
depend("$4.ShaderParam","$8.Name")
depend("$4.ShaderParam","$10.Name")
depend("$4.ShaderParam","$7.Name")
depend("$4.ShaderParam","$9.Name")
depend("$15.Plug","$10.Plug")
connect("$10.Desc","$15.Desc")
depend("$6.Plug","$16.Plug")
depend("$14.Plug","$9.Plug")
connect("$9.Desc","$14.Desc")
depend("$12.Plug","$7.Plug")
connect("$7.Desc","$12.Desc")
depend("$13.Plug","$8.Plug")
connect("$8.Desc","$13.Desc")
connect("$22.Transform","$29.Out")
connect("$22.Color","$27")
connect("$22.Intensity","$38")
connect("$29.RZ","$32")
connect("$29.In","$33.Out")
